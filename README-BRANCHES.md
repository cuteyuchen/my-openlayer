# 分支策略说明

本项目采用双分支策略来支持 OpenLayers 的不同版本，确保向后兼容性和前向发展。

## 分支架构

### 主分支 (main)
- **OpenLayers 版本**: 10.6.1+
- **项目版本**: 2.x.x 系列
- **状态**: 主要开发分支
- **维护策略**: 持续开发和功能更新

### 遗留分支 (ol6-legacy)
- **OpenLayers 版本**: 6.15.1
- **项目版本**: 1.x.x 系列
- **状态**: 兼容性维护
- **维护策略**: 仅关键 bug 修复和安全更新

## 版本管理策略

### 版本号规则

#### 主分支 (main)
- **格式**: `2.x.y`
- **主版本号**: 2 (表示 OpenLayers 10.x 系列)
- **次版本号**: 功能更新
- **修订版本号**: bug 修复

#### 遗留分支 (ol6-legacy)
- **格式**: `1.x.y`
- **主版本号**: 1 (表示 OpenLayers 6.x 系列)
- **次版本号**: 功能更新 (仅限兼容性改进)
- **修订版本号**: bug 修复

### 发布策略

#### 主分支发布
```bash
# 开发版本
npm install my-openlayer@latest

# 指定版本
npm install my-openlayer@^2.0.0
```

#### 遗留分支发布
```bash
# 稳定版本
npm install my-openlayer@^1.0.0

# 指定版本
npm install my-openlayer@1.0.0
```

## 开发工作流

### 主分支开发
1. 从 `main` 分支创建功能分支
2. 开发新功能或修复 bug
3. 提交 Pull Request 到 `main` 分支
4. 代码审查和测试
5. 合并到 `main` 分支

### 遗留分支维护
1. 从 `ol6-legacy` 分支创建修复分支
2. 仅进行关键 bug 修复
3. 提交 Pull Request 到 `ol6-legacy` 分支
4. 代码审查和测试
5. 合并到 `ol6-legacy` 分支

## 分支选择指南

### 选择主分支 (main) 的情况
- ✅ 新项目开发
- ✅ 需要最新功能和性能优化
- ✅ 可以升级到 OpenLayers 10.x
- ✅ 追求长期技术支持

### 选择遗留分支 (ol6-legacy) 的情况
- ✅ 现有项目使用 OpenLayers 6.x
- ✅ 短期内无法升级 OpenLayers 版本
- ✅ 需要稳定的兼容性支持
- ✅ 项目处于维护阶段

## 迁移路径

### 从 ol6-legacy 到 main
1. 评估项目依赖和兼容性
2. 参考迁移指南文档
3. 逐步更新 OpenLayers API 调用
4. 测试功能完整性
5. 更新项目依赖版本

## 技术支持

### 主分支 (main)
- **支持期限**: 长期支持
- **更新频率**: 定期更新
- **功能开发**: 持续开发

### 遗留分支 (ol6-legacy)
- **支持期限**: 有限支持 (建议迁移)
- **更新频率**: 按需更新
- **功能开发**: 仅兼容性维护

## 贡献指南

### 主分支贡献
- 新功能开发
- 性能优化
- API 改进
- 文档更新

### 遗留分支贡献
- 关键 bug 修复
- 安全漏洞修复
- 兼容性改进
- 文档维护

---

**建议**: 新项目请优先选择主分支 (main)，现有项目建议制定迁移计划逐步升级到主分支。