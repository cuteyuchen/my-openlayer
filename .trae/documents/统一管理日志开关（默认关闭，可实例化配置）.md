## 目标
- 为项目日志输出提供统一的开关与级别控制，默认关闭；可在实例化时通过参数开启并设定级别。
- 收敛散落的 `console.*` 为统一入口，避免无控制的调试输出。

## 设计方案
1. 复用并增强 `utils/ErrorHandler.ts`
- 新增开关：`setEnabled(enabled: boolean)` 与内部状态 `enabled: boolean`。
- 现有 `logLevel: 'debug' | 'info' | 'warn' | 'error'` 保留；当 `enabled=false` 时，所有 `debug/info/warn` 不输出，仅保留必要 `error`（也可一起关闭）。
- 暴露统一方法：`debug(...args)`, `info(...args)`, `warn(...args)`, `error(...args)`；内部判断 `enabled` 与 `logLevel` 后再调用 `console.*`。

2. 在核心入口注入配置
- 在 `MyOl` 构造的 `options: Partial<MapInitType>` 增加：
  - `enableLog?: boolean`（默认 `false`）
  - `logLevel?: 'debug' | 'info' | 'warn' | 'error'`（默认 `error`）
- 构造中初始化：
  - `ErrorHandler.getInstance().setEnabled(options.enableLog ?? false)`
  - `ErrorHandler.getInstance().setLogLevel(options.logLevel ?? 'error')`

3. 收敛现有日志调用
- 将关键模块中的直接 `console.*` 替换为 `ErrorHandler.getInstance().*`：
  - `src/MyOl.ts`：初始化完成、模块加载、定位完成、销毁等 `console.debug/warn`。
  - `src/core/SelectHandler.ts`：启用/禁用、回调异常、定位错误等。
  - `src/core/Polygon.ts`：数据缺失警告、暂不支持类型等。
  - `src/core/Line.ts`：河流数据加载失败相关。
  - `src/core/Point.ts`：定位失败、DOM 元素缺失等。
  - `src/core/VueTemplatePoint.ts`：Vue 未安装提示。
- 规则：
  - `console.debug` → `ErrorHandler.getInstance().debug`
  - `console.info` → `ErrorHandler.getInstance().info`
  - `console.warn` → `ErrorHandler.getInstance().warn`
  - `console.error` → `ErrorHandler.getInstance().error`

4. 可选的向下传递（保持最小改动）
- 目前多数类构造仅接收 `map`；不改其签名。通过入口 `MyOl` 设置全局 `ErrorHandler` 状态即可生效，无需向各类传参。
- 如后续需要组件级别开关，可在各 `Options` 增加 `enableLog`/`logLevel` 并在方法内临时调整 `ErrorHandler`（不在本次范围）。

## 变更范围与文件
- `src/utils/ErrorHandler.ts`：新增 `enabled` 与 `setEnabled`，方法内部判断开关；保持 2 空格缩进与现有风格。
- `src/MyOl.ts`：`MapInitType` 扩展配置键；构造中初始化日志开关与级别；替换其内部的 `console.*`。
- `src/core/*`（选择性但覆盖主要噪声源）：`SelectHandler.ts`、`Polygon.ts`、`Line.ts`、`Point.ts`、`VueTemplatePoint.ts` 将 `console.*` 替换为 `ErrorHandler` 调用。

## 使用示例
```ts
new MyOl('map', {
  enableLog: true,
  logLevel: 'debug',
  // 其他原有配置...
});
```
默认：`enableLog=false`、`logLevel='error'`，仅关键错误输出。

## 验证与回归
- 在 `enableLog=false`：初始化与操作不产生调试/警告输出。
- 在 `enableLog=true` + `logLevel='debug'`：可见调试信息（初始化、模块加载、定位等）。
- 重点路径（要素选择、点/线/面绘制、图层加载）执行，确认无未收敛的 `console.*` 残留导致噪声。

## 兼容性与风险控制
- 仅增强 `ErrorHandler` 与替换调用，不改变业务逻辑；默认关闭确保与现有行为一致。
- 如第三方库内部输出不受控，此方案不拦截第三方 `console.*`（符合预期）。

如确认该方案，我将按上述范围进行最小改动的实现与替换。